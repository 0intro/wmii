#!9PREFIX/bin/rc -x
# configure wmii

CLIENT_BAR=0
CLIENT_BORDER=3
HANDLEINC=1

SEL_COLOR='#ffffff #444466 #666688'
NORM_COLOR='#dddddd #555555 #777777'
FONT=fixed

fn xwrite { echo -n $2 | wmiir write $1 }

# WMIIWM CONFIGURATION
xwrite /wm/default/bar $CLIENT_BAR
xwrite /wm/default/border $CLIENT_BORDER
xwrite /wm/default/font $FONT
xwrite /wm/default/selcolor $SEL_COLOR
xwrite /wm/default/normcolor $NORM_COLOR
for(page in `{wmiir read /wm | grep '^d' | awk '{print $10}' | grep -v new}) {
	for(area in `{wmiir read /wm/$page | grep '^d' | awk '{print $10}' | grep -v new}) {
		for(client in `{wmiir read /wm/$page/$area | grep '^d' | awk '{print $10}'}) {
			xwrite /wm/$page/$area/$client/bar $CLIENT_BAR
			xwrite /wm/$page/$area/$client/border $CLIENT_BORDER
		}
	}
}

# WMIIBAR CONFIGURATION
xwrite /bar/font $FONT
xwrite /bar/defcolor $SEL_COLOR
echo -n fnord | wmiir write /bar/new/data 
echo -n key | wmiir write /bar/new/data 

# MISC
xsetroot -mod 2 2 -bg '#444466' -fg '#555555'
keys&
status&
